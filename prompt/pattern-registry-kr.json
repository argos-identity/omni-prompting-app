{
  "registry_metadata": {
    "version": "1.1.0",
    "last_updated": "2025-01-15",
    "description": "Deterministic pattern-to-tool mapping with Korean keyword support"
  },

  "tool_definitions": [
    {
      "id": "T001",
      "name": "verify_date",
      "script": "A.js",
      "function": "Validate document issue date against allowed range",
      "params": ["target_date", "range_days"],
      "return_type": "boolean"
    },
    {
      "id": "T002",
      "name": "verify_address",
      "script": "B.js",
      "function": "Validate address against real-world database",
      "params": ["full_address_string"],
      "return_type": "boolean"
    },
    {
      "id": "T003",
      "name": "tax_authority_check",
      "script": "C.js",
      "function": "Verify business registration and ownership",
      "params": ["business_id", "owner_name"],
      "return_type": "json"
    },
    {
      "id": "T004",
      "name": "ocr_extractor",
      "script": "D.js",
      "function": "Extract text from image/scanned document",
      "params": ["image_file"],
      "return_type": "string"
    },
    {
      "id": "T005",
      "name": "sanctions_screening",
      "script": "E.js",
      "function": "Screen against OFAC/UN/EU sanctions lists",
      "params": ["entity_name", "entity_type"],
      "return_type": "json"
    },
    {
      "id": "T006",
      "name": "pep_check",
      "script": "F.js",
      "function": "Check Politically Exposed Person status",
      "params": ["full_name", "country_code"],
      "return_type": "json"
    },
    {
      "id": "T007",
      "name": "adverse_media",
      "script": "G.js",
      "function": "Screen for negative news and media",
      "params": ["entity_name", "search_scope"],
      "return_type": "json"
    },
    {
      "id": "T008",
      "name": "liveness_detection",
      "script": "H.js",
      "function": "Verify live person via biometric check",
      "params": ["session_id"],
      "return_type": "boolean"
    },
    {
      "id": "T009",
      "name": "face_match",
      "script": "I.js",
      "function": "Compare selfie against ID document photo",
      "params": ["selfie_image", "id_photo_image"],
      "return_type": "json"
    },
    {
      "id": "T010",
      "name": "bank_account_verify",
      "script": "J.js",
      "function": "Verify bank account ownership",
      "params": ["account_number", "account_holder_name", "bank_code"],
      "return_type": "json"
    },
    {
      "id": "T011",
      "name": "tin_ssn_verify",
      "script": "K.js",
      "function": "Verify TIN/SSN against IRS database",
      "params": ["tin_or_ssn", "entity_name"],
      "return_type": "json"
    },
    {
      "id": "T012",
      "name": "ubo_verify",
      "script": "L.js",
      "function": "Verify Ultimate Beneficial Owner information",
      "params": ["ubo_name", "ownership_percentage"],
      "return_type": "json"
    },
    {
      "id": "T013",
      "name": "credit_check",
      "script": "M.js",
      "function": "Perform soft credit check",
      "params": ["individual_name", "ssn_last4"],
      "return_type": "json"
    },
    {
      "id": "T014",
      "name": "entity_verification",
      "script": "N.js",
      "function": "Verify legal entity registration status",
      "params": ["entity_name", "state_code"],
      "return_type": "json"
    }
  ],

  "pattern_definitions": [
    {
      "pattern_id": "P001",
      "category": "DATE_VALIDATION",
      "priority": 1,
      "criticality": "HIGH",
      "keywords": [
        "within * days",
        "within * months",
        "issued within",
        "not older than",
        "validity period",
        "date of issue",
        "expiration date",
        "유효기간",
        "발급일",
        "발행일",
        "만료일",
        "이내"
      ],
      "maps_to_tool": "T001",
      "param_extraction_rules": {
        "target_date": {
          "method": "REGEX",
          "pattern": "(\\d{4}-\\d{2}-\\d{2})",
          "fallback": "FIELD:document_issue_date"
        },
        "range_days": {
          "method": "REGEX",
          "pattern": "within (\\d+) days",
          "conversion": {
            "months_to_days": "multiply_by_30"
          },
          "fallback": "90"
        }
      },
      "source_type": "Document OCR"
    },
    {
      "pattern_id": "P002",
      "category": "ADDRESS_VALIDATION",
      "priority": 2,
      "criticality": "MEDIUM",
      "keywords": [
        "business address",
        "registered office",
        "principal place",
        "physical location",
        "verify address",
        "address verification",
        "사업장 주소",
        "소재지",
        "주소지",
        "등록 주소",
        "본점 소재지",
        "영업장 주소"
      ],
      "maps_to_tool": "T002",
      "param_extraction_rules": {
        "full_address_string": {
          "method": "FIELD",
          "field_name": "business_address",
          "fallback": "EXTRACT_FROM_DOCUMENT"
        }
      },
      "source_type": "Document OCR"
    },
    {
      "pattern_id": "P003",
      "category": "BUSINESS_REGISTRATION",
      "priority": 3,
      "criticality": "HIGH",
      "keywords": [
        "business registration",
        "tax authority",
        "business license",
        "registration number",
        "tax ID",
        "employer identification",
        "TIN",
        "EIN",
        "사업자등록",
        "사업자 등록",
        "사업자 등록증",
        "사업자등록증",
        "법인등록",
        "법인 등록",
        "등록번호",
        "세금 ID",
        "연방 세금"
      ],
      "maps_to_tool": "T003",
      "param_extraction_rules": {
        "business_id": {
          "method": "REGEX",
          "pattern": "(\\d{3}-\\d{2}-\\d{5})",
          "fallback": "FIELD:registration_number"
        },
        "owner_name": {
          "method": "FIELD",
          "field_name": "representative_name",
          "fallback": "FIELD:owner_name"
        }
      },
      "source_type": "Document OCR"
    },
    {
      "pattern_id": "P004",
      "category": "DOCUMENT_OCR",
      "priority": 0,
      "criticality": "LOW",
      "keywords": [
        "scanned document",
        "uploaded image",
        "document image",
        "photo of document",
        "scan",
        "image file",
        "스캔",
        "이미지 파일",
        "문서 사진",
        "첨부 문서"
      ],
      "maps_to_tool": "T004",
      "param_extraction_rules": {
        "image_file": {
          "method": "RUNTIME",
          "source": "uploaded_files"
        }
      },
      "source_type": "User Input",
      "is_prerequisite": true
    },
    {
      "pattern_id": "P005",
      "category": "SANCTIONS_SCREENING",
      "priority": 4,
      "criticality": "HIGH",
      "keywords": [
        "OFAC",
        "sanctions list",
        "sanctions",
        "sanctioned",
        "restricted party",
        "denied party",
        "SDN list",
        "embargo",
        "제재",
        "제재 목록",
        "제재리스트",
        "금융제재",
        "경제제재",
        "자금세탁",
        "AML",
        "테러자금"
      ],
      "maps_to_tool": "T005",
      "param_extraction_rules": {
        "entity_name": {
          "method": "FIELD",
          "field_name": "business_name",
          "fallback": "FIELD:individual_name"
        },
        "entity_type": {
          "method": "INFER",
          "rule": "IF business_name THEN 'ORGANIZATION' ELSE 'INDIVIDUAL'"
        }
      },
      "source_type": "User Input"
    },
    {
      "pattern_id": "P006",
      "category": "PEP_SCREENING",
      "priority": 5,
      "criticality": "HIGH",
      "keywords": [
        "PEP",
        "politically exposed",
        "public official",
        "government position",
        "political figure",
        "senior official",
        "정치적 주요인물",
        "고위공직자",
        "공직자",
        "정치인",
        "공무원 여부"
      ],
      "maps_to_tool": "T006",
      "param_extraction_rules": {
        "full_name": {
          "method": "FIELD",
          "field_name": "individual_name"
        },
        "country_code": {
          "method": "FIELD",
          "field_name": "nationality",
          "fallback": "FIELD:country_of_residence"
        }
      },
      "source_type": "User Input"
    },
    {
      "pattern_id": "P007",
      "category": "MEDIA_SCREENING",
      "priority": 6,
      "criticality": "MEDIUM",
      "keywords": [
        "adverse media",
        "negative news",
        "reputation check",
        "media screening",
        "news search",
        "public records",
        "부정적 언론",
        "뉴스 검색",
        "평판 조회",
        "언론 보도",
        "기사 검색"
      ],
      "maps_to_tool": "T007",
      "param_extraction_rules": {
        "entity_name": {
          "method": "FIELD",
          "field_name": "business_name",
          "fallback": "FIELD:individual_name"
        },
        "search_scope": {
          "method": "DEFAULT",
          "value": "GLOBAL"
        }
      },
      "source_type": "User Input"
    },
    {
      "pattern_id": "P008",
      "category": "LIVENESS_CHECK",
      "priority": 7,
      "criticality": "HIGH",
      "keywords": [
        "liveness",
        "liveness detection",
        "live check",
        "anti-spoofing",
        "real person verification",
        "biometric liveness",
        "생체 인증",
        "라이브니스",
        "실물 확인",
        "본인 확인"
      ],
      "maps_to_tool": "T008",
      "param_extraction_rules": {
        "session_id": {
          "method": "RUNTIME",
          "source": "current_session"
        }
      },
      "source_type": "User Input"
    },
    {
      "pattern_id": "P009",
      "category": "BIOMETRIC_MATCH",
      "priority": 8,
      "criticality": "HIGH",
      "keywords": [
        "face match",
        "facial verification",
        "photo ID match",
        "selfie verification",
        "identity photo match",
        "biometric comparison",
        "얼굴 대조",
        "안면 인식",
        "셀피 검증",
        "신분증 사진 대조"
      ],
      "maps_to_tool": "T009",
      "param_extraction_rules": {
        "selfie_image": {
          "method": "RUNTIME",
          "source": "captured_selfie"
        },
        "id_photo_image": {
          "method": "RUNTIME",
          "source": "extracted_id_photo"
        }
      },
      "source_type": "User Input"
    },
    {
      "pattern_id": "P010",
      "category": "BANK_VERIFICATION",
      "priority": 9,
      "criticality": "MEDIUM",
      "keywords": [
        "bank account",
        "account verification",
        "account holder",
        "bank details",
        "settlement account",
        "routing number",
        "은행 계좌",
        "계좌 확인",
        "계좌 검증",
        "계좌 번호",
        "라우팅 번호",
        "계좌 명의",
        "정산 계좌",
        "입금 계좌",
        "출금 계좌"
      ],
      "maps_to_tool": "T010",
      "param_extraction_rules": {
        "account_number": {
          "method": "FIELD",
          "field_name": "bank_account_number"
        },
        "account_holder_name": {
          "method": "FIELD",
          "field_name": "account_holder"
        },
        "bank_code": {
          "method": "FIELD",
          "field_name": "bank_code",
          "fallback": "EXTRACT_FROM_ACCOUNT"
        }
      },
      "source_type": "User Input"
    },
    {
      "pattern_id": "P011",
      "category": "TIN_SSN_VERIFICATION",
      "priority": 10,
      "criticality": "HIGH",
      "keywords": [
        "TIN verification",
        "SSN verification",
        "tax identification",
        "social security",
        "IRS database",
        "TIN/SSN",
        "세금 ID 검증",
        "납세자 번호",
        "사회보장번호",
        "SSN",
        "국세청"
      ],
      "maps_to_tool": "T011",
      "param_extraction_rules": {
        "tin_or_ssn": {
          "method": "FIELD",
          "field_name": "tax_id"
        },
        "entity_name": {
          "method": "FIELD",
          "field_name": "legal_name"
        }
      },
      "source_type": "User Input"
    },
    {
      "pattern_id": "P012",
      "category": "UBO_VERIFICATION",
      "priority": 11,
      "criticality": "HIGH",
      "keywords": [
        "beneficial owner",
        "UBO",
        "ultimate beneficial",
        "ownership structure",
        "25% ownership",
        "실소유주",
        "실질적 소유자",
        "수익적 소유자",
        "지분 25%",
        "25% 이상",
        "소유권 정보",
        "UBO 검증"
      ],
      "maps_to_tool": "T012",
      "param_extraction_rules": {
        "ubo_name": {
          "method": "FIELD",
          "field_name": "beneficial_owner_name"
        },
        "ownership_percentage": {
          "method": "FIELD",
          "field_name": "ownership_percent"
        }
      },
      "source_type": "User Input"
    },
    {
      "pattern_id": "P013",
      "category": "CREDIT_CHECK",
      "priority": 12,
      "criticality": "MEDIUM",
      "keywords": [
        "credit check",
        "credit inquiry",
        "soft credit",
        "credit score",
        "credit report",
        "신용 조회",
        "신용조회",
        "신용 점수",
        "신용 확인",
        "소프트 신용",
        "재정적 위험"
      ],
      "maps_to_tool": "T013",
      "param_extraction_rules": {
        "individual_name": {
          "method": "FIELD",
          "field_name": "owner_name"
        },
        "ssn_last4": {
          "method": "FIELD",
          "field_name": "ssn_last_four"
        }
      },
      "source_type": "User Input"
    },
    {
      "pattern_id": "P014",
      "category": "ENTITY_VERIFICATION",
      "priority": 13,
      "criticality": "HIGH",
      "keywords": [
        "entity verification",
        "corporate registration",
        "secretary of state",
        "good standing",
        "legal entity",
        "법인 실체",
        "법인 검증",
        "법인 등록",
        "주무장관",
        "등록부 조회",
        "Good Standing",
        "법인 상태"
      ],
      "maps_to_tool": "T014",
      "param_extraction_rules": {
        "entity_name": {
          "method": "FIELD",
          "field_name": "legal_business_name"
        },
        "state_code": {
          "method": "FIELD",
          "field_name": "incorporation_state"
        }
      },
      "source_type": "Document OCR"
    },
    {
      "pattern_id": "P015",
      "category": "ID_VERIFICATION",
      "priority": 14,
      "criticality": "HIGH",
      "keywords": [
        "government ID",
        "identity document",
        "ID verification",
        "passport",
        "driver license",
        "신분증",
        "정부 발급 신분증",
        "신원 확인",
        "여권",
        "운전면허증",
        "주민등록증"
      ],
      "maps_to_tool": "T004",
      "param_extraction_rules": {
        "image_file": {
          "method": "RUNTIME",
          "source": "id_document_image"
        }
      },
      "source_type": "Document OCR"
    },
    {
      "pattern_id": "P016",
      "category": "DOCUMENT_SUBMISSION",
      "priority": 15,
      "criticality": "MEDIUM",
      "keywords": [
        "submit document",
        "document submission",
        "proof of",
        "evidence",
        "supporting document",
        "제출 서류",
        "증빙 서류",
        "증빙서류",
        "서류 제출",
        "필수 서류",
        "구비 서류"
      ],
      "maps_to_tool": "T004",
      "param_extraction_rules": {
        "image_file": {
          "method": "RUNTIME",
          "source": "uploaded_documents"
        }
      },
      "source_type": "User Input"
    }
  ],

  "role_mapping": {
    "priority_order": [
      {"priority": 1, "keywords": ["kyc", "kyb", "KYC", "KYB", "고객확인", "신원확인"], "role": "KYC/KYB Analyst"},
      {"priority": 2, "keywords": ["aml", "AML", "fraud", "sanctions", "자금세탁", "제재", "사기"], "role": "Senior Compliance Officer"},
      {"priority": 3, "keywords": ["compliance", "regulation", "legal", "규정", "준수", "법규"], "role": "Senior Compliance Officer"},
      {"priority": 4, "keywords": ["financial", "payment", "transaction", "금융", "결제", "거래", "정산"], "role": "Financial Review Officer"},
      {"priority": 5, "keywords": ["document", "certificate", "proof", "문서", "서류", "증빙", "심사", "온보딩"], "role": "Document Verification Specialist"}
    ],
    "default_role": "Verification Agent"
  },

  "risk_level_mapping": {
    "priority_order": [
      {"priority": 1, "keywords": ["fraud", "criminal", "aml", "sanctions", "pep", "terrorism", "사기", "범죄", "자금세탁", "제재", "테러"], "level": "HIGH"},
      {"priority": 2, "keywords": ["compliance", "verification", "validation", "regulatory", "준수", "검증", "심사", "규제"], "level": "MEDIUM"},
      {"priority": 3, "keywords": ["informational", "optional", "recommended", "정보", "선택", "권장"], "level": "LOW"}
    ],
    "default_level": "MEDIUM"
  },

  "decision_rules": {
    "critical_patterns": ["P001", "P003", "P005", "P006", "P008", "P009", "P011", "P012", "P014", "P015"],
    "review_patterns": ["P006", "P007", "P013"],
    "outcome_definitions": {
      "PASS": "All validation checks returned valid status",
      "REJECT": "One or more CRITICAL checks failed",
      "MANUAL_REVIEW": "Non-critical check failed OR data ambiguity detected"
    }
  }
}
